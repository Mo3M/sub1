{
    "log": {
        "disabled": false,
        "level": "info",
        "timestamp": true
    },
    "dns": {
        "servers": [
            {
                "tag": "local",
                "address": "217.218.127.127",
				"detour": "direct"                
            },
            {
                "tag": "dns_proxy",
                "address": "tls://1.1.1.1",
                "address_resolver": "dns_resolver"
            },
            {
                "tag": "dns_direct",
                "address": "h3://dns.alidns.com/dns-query",
                "address_resolver": "dns_resolver",
                "detour": "DIRECT"
            },
            {
                "tag": "dns_fakeip",
                "address": "fakeip"
            },
            {
                "tag": "dns_resolver",
                "address": "223.5.5.5",
                "detour": "DIRECT"
            },
            {
                "tag": "block",
                "address": "rcode://success"
            }
        ],
        "rules": [
            {
                "outbound": [
                    "any"
                ],
                "server": "dns_resolver"
            },
            {
                "geosite": [
                    "category-ads-all"
                ],
                "server": "dns_block",
                "disable_cache": true
            },          
            {
                "domain_suffix": [
                    "ir"
                ],
                "server": "local"
            }
        ],
        "final": "dns_proxy",
		"strategy": "prefer_ipv4",
        "independent_cache": true,
        "fakeip": {
            "enabled": true,
            "inet6_range": "fc00::\/18",
            "inet4_range": "198.18.0.0\/15"
        }
    },
    "ntp": {
        "enabled": true,
        "server": "time.apple.com",
        "server_port": 123,
        "interval": "30m",
        "detour": "DIRECT"
    },
    "inbounds": [
        {
            "type": "mixed",
            "tag": "mixed-in",
            "listen": "0.0.0.0",
            "listen_port": 2080
        },
        {
            "type": "tun",
            "tag": "tun-in",
            "inet4_address": "172.19.0.1/30",
            "inet6_address": "fdfe:dcba:9876::1/126",
            "auto_route": true,
            "strict_route": true,
            "stack": "mixed",
            "sniff": true
        }
    ],
    "outbounds": [],    
    "experimental": {
        "cache_file": {
            "enabled": true,
            "store_fakeip": true
        },
        "clash_api": {
            "external_controller": "127.0.0.1:9090",
            "external_ui": "dashboard"
        }
    },
	"route": {
		"geoip": {
			"path": "geoip.db",
			"download_url": "https://raw.githubusercontent.com/CHIZI-0618/v2ray-rules-dat/release/geoip.db",
			"download_detour": "direct"
		},
		"geosite": {
			"path": "geosite.db",
			"download_url": "https://github.com/yangchuansheng/sing-geosite/releases/latest/download/geosite.db",
			"download_detour": "direct"
		},
		"rules": [{
			"protocol": "dns",
			"outbound": "dns-out",
		},{
			"geosite": ["category-ads-all"],
			"domain_keyword": ["yektanet", "adengine.telewebiom.com"],
			"outbound" : "block"
		},
		{
			"geoip": "private",
			"domain_suffix":["ir", "aparat.com", "digikala.com", "telewebion.com", "varzesh3.com"],
			"port": [22, 3389],
			"outbound": "direct"
		}],
		"final": "shadowsocks-out",
		"auto_detect_interface": true
	}
}
